<div class="container-fluid">
  <section id="minimal-statistics">
    <div class="row">
      <div class="col-12 mt-3 mb-1 searchbar">
        <h5 class="primary-color">
          <i class="fas fa-ticket-alt"></i>
          Tickets
        </h5>
        <div class="form-check">
          <label class="form-check-label">
            <input type="checkbox" class="form-check-input">
            My Tickets <i class="input-helper"></i>
          </label>
        </div>
        <div class="form-control-sm">
          <div class="form-group has-search mb-2">
            <span class="fa fa-search form-control-feedback"></span>
            <input type="search" class="form-control" [(ngModel)]="searchValue" [ngModelOptions]="{standalone: true}"
              (keyup)="search()" placeholder="Search Tickets">
          </div>
        </div>
        <div class="form-control-sm">
          <div class="form-group has-search mb-2">
            <input type="date" class="form-control" placeholder="date">
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xl-2 col-sm-6 col-12" (click)="setStatus('draft')">
        <div class="card draft mt-2" [class.active]="'draft' === activeState">
          <div class="card-content">
            <div class="card-body">
              <div class="media d-flex">
                <div class="align-self-center">
                  <i class="fas fa-pen float-left"></i>
                </div>
                <div class="media-body text-right">
                  <span>Draft</span>
                </div>
                <div class="media-body text-right">
                  <span>{{ CountStatus[0] }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-2 col-sm-6 col-12" (click)="setStatus('more_info')">
        <div class="card moreinfo mt-2" [class.active]="'more_info' === activeState">
          <div class="card-content">
            <div class="card-body">
              <div class="media d-flex">
                <div class="align-self-center">
                  <i class="fas fa-clock float-left"></i>
                </div>
                <div class="media-body text-right">
                  <span>More Info</span>
                </div>
                <div class="media-body text-right">
                  <span>{{ CountStatus[1] }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-2 col-sm-6 col-12" (click)="setStatus('pending')">
        <div class="card pending mt-2" [class.active]="'pending' === activeState">
          <div class="card-content">
            <div class="card-body">
              <div class="media d-flex">
                <div class="align-self-center">
                  <i class="fas fa-clock float-left"></i>
                </div>
                <div class="media-body text-right">
                  <span>Pending</span>
                </div>
                <div class="media-body text-right">
                  <span>{{ CountStatus[2] }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-2 col-sm-6 col-12" (click)="setStatus('resolved')">
        <div class="card resolved mt-2" [class.active]="'resolved' === activeState">
          <div class="card-content">
            <div class="card-body">
              <div class="media d-flex">
                <div class="align-self-center">
                  <i class="fas fa-check float-left"></i>
                </div>
                <div class="media-body text-right">
                  <span>Resolved</span>
                </div>
                <div class="media-body text-right">
                  <span>{{ CountStatus[3] }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-2 col-sm-6 col-12" (click)="setStatus('close')">
        <div class="card closed mt-2" [class.active]="'close' === activeState">
          <div class="card-content">
            <div class="card-body">
              <div class="media d-flex">
                <div class="align-self-center">
                  <i class="fas fa-check-circle float-left"></i>
                </div>
                <div class="media-body text-right">
                  <span>Closed</span>
                </div>
                <div class="media-body text-right">
                  <span>{{ CountStatus[4] }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-2 col-sm-6 col-12" (click)="getAllTicket('all')">
        <div class="card all mt-2" [class.active]="'all' === activeState">
          <div class="card-content">
            <div class="card-body">
              <div class="media d-flex">
                <div class="align-self-center">
                  <i class="fas fa-clone float-left"></i>
                </div>
                <div class="media-body text-right">
                  <span>All</span>
                </div>
                <div class="media-body text-right">
                  <span>{{ countAll }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<div class="container-fluid">
  <div>
    <div class="card mt-3">
      <div class="card-header text-left" *ngIf="ticket$ | async as ticket$; index as i">
        <div class="card mt-3" *ngFor="let ticket of ticket$ | slice:startIndex:endIndex">
          <div class="card-header" style="background-color: #F2EDF3;">
            <div class="row">
              <div class="col-3">
                <div class="col">
                  <span>{{ticket.subject}}</span>
                </div>
                <div class="col">
                  <i class="fas fa-globe-americas" style="color: gray;"></i><span class="mx-1"
                    style="color: black;">{{ticket.creater}} - {{ticket.site.initials}}</span>
                </div>
                <div class="col">
                  <span for="">{{ticket.site.product.name}}</span>
                </div>
                <div class="col">
                  <span style="color: gray;">Create {{ticket.date}}</span>
                </div>
              </div>
              <div class="col-3 center">
                <div class="form-group">
                  <textarea class="form-control detail" id="exampleFormControlTextarea1" rows="3"
                    readonly>{{ticket.description}}</textarea>
                </div>
              </div>
              <div class="col-2 center paperclass">
                <i class="fas fa-paperclip secondary-color paperclip"></i>
              </div>
              <div class="col-1">
                <div class="col">
                  <div class="row">
                    <div class="col-md-4 text-lg-left">
                      <div class="dropdown dd">
                        <button class="btn dropdown-toggle priority" type="button" id="dropdownMenuButton"
                          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <i class="fas fa-circle mx-2 text-left"></i>{{ticket.priority}}
                        </button>
                        <div class="dropdown-menu w-100" aria-labelledby="dropdownMenuButton">
                          <a class="dropdown-item" href="#"> <i class="fas fa-circle mx-2"></i> Medium </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-star mx-2"></i> High </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="row">
                    <div class="col-md-4 text-lg-left">
                      <div class="dropdown dd">
                        <button class="btn dropdown-toggle type" type="button" id="dropdownMenuButton"
                          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <i class="fas fa-info-circle mx-2 text-left"></i>{{ticket.type}}
                        </button>
                        <div *ngFor="let type of Type" class="dropdown-menu w-100" aria-labelledby="dropdownMenuButton">
                          <a class="dropdown-item" href="#"> <i class="fas fa-plus-circle mx-2"></i> ...</a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-info-circle mx-2"></i> Info </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-question-circle mx-2"></i> Consult </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-info-circle mx-2"></i> Other </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col">
                  <div class="row">
                    <div class="col-md-3 text-lg-left">
                      <div class="dropdown dd">
                        <button class="btn dropdown-toggle status" type="button" id="dropdownMenuButton"
                          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <i class="fas fa-pen mx-2 text-left"></i>{{ticket.status}}
                        </button>
                        <div class="dropdown-menu " aria-labelledby="dropdownMenuButton">
                          <a class="dropdown-item" href="#"> <i class="fas fa-pen mx-2 text-left"></i> Pending </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-pen mx-2 text-left"></i> Assign </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-pen mx-2 text-left"></i> Resoled </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-pen mx-2 text-left"></i> Reject </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-pen mx-2 text-left"></i> Revert </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-pen mx-2 text-left"></i> Close </a>
                          <a class="dropdown-item" href="#"> <i class="fas fa-pen mx-2 text-left"></i> More Info </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-1 ">
              </div>
              <div class="col-2 center action">
                <i *ngIf="isDraft(ticket)" class="fas fa-trash mx-1 secondary-color icon"
                  (click)="onSelectedDelete(ticket.id)"></i>
                <i class="fas fa-pen mx-1 secondary-color icon"></i>
                <a [routerLink]="['/detail', ticket.id]">
                  <i class="fas fa-eye mx-1 secondary-color icon"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-end">
          <li class="page-item">
            <a class="page-link" href="" tabindex="-1">Previous</a>
          </li>
          <li *ngFor="let i of getArrayFromNumber((ticket$| async)?.length); let in = index" class="page-item">
            <a class="page-link" (click)="updateIndex(in)">{{in+1}}</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>